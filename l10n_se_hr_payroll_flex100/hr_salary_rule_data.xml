<?xml version="1.0" encoding="utf-8"?>
<openerp>
  <data noupdate="1">

    <record id="hr_salary_rule-flexjust" model="hr.salary.rule">
      <field name="category_id" ref="l10n_se_hr_payroll.hr_salary_rule_category-BRUAVG" />
      <field name="code">flex-just</field>
      <field name="salary_art"></field>
      <field name="name">FLex Justification</field>
      <field name="sequence">220</field>
      <field name="appears_on_payslip">True</field>
      <field name="condition_select">python</field>
      <field name="condition_python">result = contract.type_id.work_time == 'flex' and worked_days.WORK100.payslip_id.schema_number_of_hours &gt; worked_days.WORK100.payslip_id.flex_working_hours</field>
      <field name="amount_select">code</field>
      <field name="amount_python_compute">result_rate = 100.0 - (worked_days.WORK100.payslip_id.percent_number_of_days * 100.0)
result = contract.wage
</field>
      <field name="quantity">1</field>
      <field name="note">Flex Justification</field>
    </record>

    <record id="hr_salary_rule-nechour-flex" model="hr.salary.rule">
      <field name="category_id" ref="hr_payroll.BASIC" />
      <field name="code">nec-hour-flex</field>
      <field name="salary_art">141</field>
      <field name="name">Hour wage When Necessary (flex)</field>
      <field name="sequence">300</field>
      <field name="appears_on_payslip">True</field>
      <field name="condition_select">python</field>
      <field name="condition_python">result = contract.type_id.work_time == 'flex'</field>
      <field name="amount_select">code</field>
      <field name="amount_python_compute">
result_qty = worked_days.WORK100.payslip_id.flex_working_hours
result = contract.wage</field>
      <field name="quantity">1</field>
      <field name="note">Calculate hourly wage using benefit nec_hour</field>
    </record>

    <record id="l10n_se_hr_payroll.hr_payroll_structure-kl" model="hr.payroll.structure">
      <field eval="[(4, ref('hr_salary_rule-flexjust'))]" name="rule_ids" />
    </record>

    <!-- timanställd-flex -->
    <record id="hr_payroll_structure-tim-flex" model="hr.payroll.structure">
      <field name="code">bas2017-tim-flex</field>
      <field name="name">Timanställd (flex)</field>
      <field name="company_id" ref="base.main_company" />
      <field name="parent_id" ref="l10n_se_hr_payroll.hr_payroll_structure-gl" />
      <field eval="[(4, ref('hr_salary_rule-nechour-flex'))]" name="rule_ids" />
    </record>

  </data>

</openerp>
